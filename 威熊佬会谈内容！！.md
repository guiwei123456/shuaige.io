# 威熊佬会谈内容！！

## 第一次威熊会谈

### 1.有了JWT,为什么还用session

【7组】拆台熊 2021/12/6 21:01:27
那在性能上jwt要比session更出色

【7组】拆台熊 2021/12/6 21:01:37
Server少存储了很多东西

【7组】拆台熊 2021/12/6 21:01:44
按理说要用jwt更好呀

**这里熊佬说 jwt的性能更不错，但是jwt有缺陷，就是jwt是一次性的，在过期之前无法弃用，导致你如果想在项目中进行销毁之类的操作无法做到，这里熊佬就引出了实战中，我们销毁session的三大情况**

### 2.session在项目中销毁（手动销毁）的三大情况

【7组】拆台熊 2021/12/6 21:04:13
是session啥时候被废弃

【7组】拆台熊 2021/12/6 21:04:21
说三个点

devil 2021/12/6 21:04:29
卧槽 三个

【7组】拆台熊 2021/12/6 21:04:40
从项目入手

【7组】拆台熊 2021/12/6 21:04:43
说中文

**第一种：就是最常用的，注销登录，剩下两种，是你不好想到，但是一说又感觉恍然大悟的情。第二中：用户黑被拉入黑名单.第三种：修改密码。这第三种很需要重视，我在写项目的时候用到了修改密码这项功能，但是并没有为其设置手动销毁session，需要警惕。**

### 3.第一次会谈感慨

【7组】拆台熊 2021/12/6 21:42:59
我希望在你们学习的过程中能多思考

【7组】拆台熊 2021/12/6 21:43:02
多实战

**熊佬说的对，在学习过程中，我们该多思考，多实战，而不是一味的去追求技术，追求进度，我们不能把学技术变成一种因为别人说学习路线是这样，所以我们学这些，这是不对的，学新技术应该是为了解决当前我们遇到的问题无法解决，或者说是解决很麻烦，想要优化，写到这里，有了一丝丝感想。**

**感想：学完javaweb，为什么我要去学ssm，当时就单纯觉得是因为，ssm要学，要用，所以去学，现在看来，并不是的，而是ssm简化了web的开发，而springboot的学习原因也是简化了ssm的配置问题，我应该多进行思考，为什么我要学这个技术，学它的意义是什么，它在我进行开发的过程中，起到了什么样的作用。**

## 第二次威熊会谈

### 1.session的存储问题

【7组】拆台熊 10:23:01
来哈,我们来考虑这样一个场景

假设你现在用的是jwt，如果server崩了并重启，那新开启的server会不会拿到并成功解析从client发过来的token

devil 10:24:07
会

【7组】拆台熊 10:24:29
那现在这样,如果你用了session,并把session存储在server本地，如果这时候server崩了,重启后，那存储在client的sessionID   还有用吗? 那所以,这是session最严重的问题。

【7组】拆台熊 10:26:29
所以你有没有想过,session要存在其他的地方

【7组】拆台熊 10:26:38
而且如果像你说的，如果本地内存满了，那session岂不是存不到了?

【7组】拆台熊 10:26:58
为了解决这个问题，那你有没有考虑过把session存到redis里或其他的数据库里呢?

【7组】拆台熊 10:28:55
如果session存在服务端本地,那就会有以下问题

【7组】拆台熊 10:29:03

1. 服务端崩了session就没了

【7组】拆台熊 10:29:14

2. 服务端内存满了就存不到session

【7组】拆台熊 10:29:31

3. 如果有多台服务端的话,session不能共用

**上述所说,session存储在本地服务器中，会造成内存问题，服务器坏了session被摧毁问题，多台服务器无法共享session问题，这几个问题，通通由一个原因造成，session存储在本地服务器中，如果我们将session存储在数据库里,所以并不会占用服务端的空间，而且并且数据库是专业级存储数据的系统,即使内存满了也会有多种扩容或集群方案,那内存的问题也不是什么大事，而且多个服务器连接同一个数据库，那么你客户端带着你的cookie来找session，服务器会去从数据库中找有无匹配的，这样也就形成了session共用。**

### 2.token本地鉴权问题

【7组】拆台熊 10:44:34
那client可以解析token吧

【7组】拆台熊 10:44:43
既然可以解析token那是不是就知道id了

拆台熊 10:44:55
然而这只是第一道防线

【7组】拆台熊 10:45:08
只是给server减轻压力

【7组】拆台熊 10:45:20
如果client都觉得不对劲了,那就没必要把数据传给server了

【7组】拆台熊 10:45:31
而server也要做一道防线来判断

在客户端中，通过解析payload的内容，来进行初步鉴权，如果鉴权通过，再进行其他验证，这样就形成了多步校验，安全问题，得到了提升，而且如果客户端鉴权都失败了，那么服务端也就少了一部分工作量，提高了效率。

### 3.课后作业

【7组】拆台熊 10:49:01
就是啥时候session与token有共用的时候